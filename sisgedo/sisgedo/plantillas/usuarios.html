{% extends "base.html" %}
{% block titulo %}
Usuarios
{% endblock titulo %}
{% block contenido %}

<ul class="breadcrumb">
  <li><a href="/">Sisgedo</a> <span class="divider">/</span></li>
  <li class="active">Usuarios</li>
</ul>

<div class="box-header" data-original-title>
  <h2><i class="icon-user"></i><span class="break"></span>Usuarios</h2>
  <div class="box-icon">
    <span class="break"></span>
    <a href="registrar/"><i class="icon-user"></i>Nuevo Usuario</a>
  </div>
</div>
<div class="box-content">
    <table class="table table-striped table-bordered" id="example">
      <thead>
        <tr>
          <th>Nombres</th>
          <th>Apellidos</th>
          <th>Usuario</th>
          <th>Email</th>
          <th>Acciones</th>
        </tr>
      </thead>   
      <tbody>
        {% for usuario in usuarios %}
        <tr>
          <td>{{usuario.first_name}}</td>
          <td>{{usuario.last_name}}</td>
          <td>{{usuario.username}}</td>
          <td>{{usuario.email}}</td>
          <td class="center" style="width:130px; text-align:center;">
            <button class="btn btn-success" value="{{usuario.id}}" >
            
            <i class="icon-zoom-in icon-white"></i>
            </button>
            <a class="btn btn-info" href="/usuarios/editar/{{usuario.id}}">

              <i class="icon-edit icon-white"></i>
            </a>
            <a class="btn btn-danger" href="/usuarios/{{usuario.id}}/perfiles">
              <i class="icon-user icon-white"></i>
            </a>
            <!--<a class="btn btn-warning"><i class="icon-white icon-refresh"></i></a>-->
          </td> 
        </tr>
        {% endfor %}
      </tbody>
    </table>
 </div> 

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">      
      
      <h3 id="myModalLabel">Datos de Usuario</h3>
    </div>
    <div class="modal-body">  
    </div>    
    <div class="modal-footer">
      
    </div>
</div>


{% endblock contenido %}

{% block script %}
  <script >
$(document).on("ready",verusuario);

function verusuario()
{
  $("button").on("click",evento);
}
    
function evento()
{
  var id=$(this).val(); 


  $("#myModal").load('/ver_usuario/{{id}}', function() { // load the url into the modal
      $(this).modal('show'); // display the modal on url load
  });

  $.ajax({
    data:{'id_usuario':id},
    type:"get",
    url:'/ver_usuario/',
    
    success:function(data)
    {  

    $(".modal-body").html('<div>Usuario:   '+data.user+'</div><div>Nombre:   '+data.nombre+'</div><div>Apellido:   '+data.apellido+'</div><div>Email:   '+data.email+'</div><div>Direccion:   '+data.direccion+'</div><div>Telefono:   '+data.telefono+'</div>');
   
    }
  }); 

}

</script>
{% endblock script %}